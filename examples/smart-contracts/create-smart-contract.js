//NOTE: replace @quantnetwork/ with ../../packages/ for all require statements below if you have not built the SDK yourself
const OverledgerSDK = require('@quantnetwork/overledger-bundle').default;
const SCFunctionTypeOptions = require('@quantnetwork/overledger-types').SCFunctionTypeOptions;
const TransactionTypeOptions = require('@quantnetwork/overledger-types').TransactionTypeOptions;
const TransactionEthereumSubTypeOptions = require('@quantnetwork/overledger-dlt-ethereum').TransactionEthereumSubTypeOptions;
const EthereumUintIntOptions = require('@quantnetwork/overledger-dlt-ethereum').EthereumUintIntOptions;
const EthereumBytesOptions = require('@quantnetwork/overledger-dlt-ethereum').EthereumBytesOptions;
const EthereumTypeOptions = require('@quantnetwork/overledger-dlt-ethereum').EthereumTypeOptions;
const DltNameOptions = require('@quantnetwork/overledger-types').DltNameOptions;
//  ---------------------------------------------------------
//  -------------- BEGIN VARIABLES TO UPDATE ----------------
//  ---------------------------------------------------------

// The following are found from your Overledger Account:
const mappId = 'atomic.swap.demo';
const bpiKey = 'atomicswapbpikey';

// Paste in your ethereum address and private key.
const partyAEthereumPrivateKey = '0xe352ad01a835ec50ba301ed7ffb305555cbf3b635082af140b3864f8e3e443d3'; //should have 0x in front
const partyAEthereumAddress = '0x650A87cfB9165C9F4Ccc7B971D971f50f753e761';


//  ---------------------------------------------------------
//  -------------- END VARIABLES TO UPDATE ------------------
//  ---------------------------------------------------------

// This is the bytecode of demoSmartContract.sol - note that it must start with 0x, for it to be deployed correctly
const smartContractDemoCode = "6080604052600060015534801561001557600080fd5b50612b7d806100256000396000f3fe6080604052600436106101815760003560e01c806379bfd77e116100d1578063c44270141161008a578063d23b2e4c11610064578063d23b2e4c14610adb578063d4ccef2214610b2a578063d4ffb60c14610b58578063ffbfc21914610b9357610181565b8063c442701414610986578063c7ceafea14610a01578063c808b72714610a2c57610181565b806379bfd77e146106ed578063812f975a146107685780638b3ecdc8146107b75780639e8ab1121461080c578063afd9917514610847578063b063152a146108ec57610181565b8063329833091161013e57806347e198d51161011857806347e198d51461053a5780634f8e4a2c146105b557806353db2bfb1461060857806366e8e7fe1461065d57610181565b806332983309146103b95780633f7dfb661461040e578063451ee191146104eb57610181565b806303ad3408146101865780630cc49e7c1461021657806314a4b6851461026557806315a7b155146102b45780631fd1eee7146102ef57806327e915301461033e575b600080fd5b34801561019257600080fd5b50610214600480360360408110156101a957600080fd5b8101908080359060200190929190803590602001906401000000008111156101d057600080fd5b8201836020820111156101e257600080fd5b8035906020019184600183028401116401000000008311171561020457600080fd5b9091929391929390505050610c38565b005b34801561022257600080fd5b5061024f6004803603602081101561023957600080fd5b8101908080359060200190929190505050610ecf565b6040518082815260200191505060405180910390f35b34801561027157600080fd5b5061029e6004803603602081101561028857600080fd5b8101908080359060200190929190505050610eee565b6040518082815260200191505060405180910390f35b3480156102c057600080fd5b506102ed600480360360208110156102d757600080fd5b8101908080359060200190929190505050610f0d565b005b3480156102fb57600080fd5b506103286004803603602081101561031257600080fd5b810190808035906020019092919050505061105d565b6040518082815260200191505060405180910390f35b34801561034a57600080fd5b506103776004803603602081101561036157600080fd5b810190808035906020019092919050505061107c565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156103c557600080fd5b506103f2600480360360208110156103dc57600080fd5b81019080803590602001909291905050506110bb565b604051808260ff1660ff16815260200191505060405180910390f35b6104e9600480360361012081101561042557600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803560ff16906020019092919080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190803560ff16906020019092919080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506110e7565b005b3480156104f757600080fd5b506105246004803603602081101561050e57600080fd5b81019080803590602001909291905050506112b1565b6040518082815260200191505060405180910390f35b34801561054657600080fd5b506105736004803603602081101561055d57600080fd5b81019080803590602001909291905050506112d0565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156105c157600080fd5b506105ee600480360360208110156105d857600080fd5b810190808035906020019092919050505061130f565b604051808215151515815260200191505060405180910390f35b34801561061457600080fd5b506106416004803603602081101561062b57600080fd5b810190808035906020019092919050505061133b565b604051808260ff1660ff16815260200191505060405180910390f35b34801561066957600080fd5b506106eb6004803603604081101561068057600080fd5b8101908080359060200190929190803590602001906401000000008111156106a757600080fd5b8201836020820111156106b957600080fd5b803590602001918460018302840111640100000000831117156106db57600080fd5b9091929391929390505050611367565b005b3480156106f957600080fd5b506107266004803603602081101561071057600080fd5b8101908080359060200190929190505050611584565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561077457600080fd5b506107a16004803603602081101561078b57600080fd5b81019080803590602001909291905050506115c3565b6040518082815260200191505060405180910390f35b3480156107c357600080fd5b506107f0600480360360208110156107da57600080fd5b81019080803590602001909291905050506115e5565b604051808260ff1660ff16815260200191505060405180910390f35b34801561081857600080fd5b506108456004803603602081101561082f57600080fd5b8101908080359060200190929190505050611611565b005b6108ea600480360360c081101561085d57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803560ff16906020019092919080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611761565b005b3480156108f857600080fd5b506109706004803603602081101561090f57600080fd5b810190808035906020019064010000000081111561092c57600080fd5b82018360208201111561093e57600080fd5b8035906020019184600183028401116401000000008311171561096057600080fd5b9091929391929390505050611887565b6040518082815260200191505060405180910390f35b34801561099257600080fd5b506109bf600480360360208110156109a957600080fd5b8101908080359060200190929190505050611957565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b348015610a0d57600080fd5b50610a16611996565b6040518082815260200191505060405180910390f35b610ad9600480360360e0811015610a4257600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803560ff16906020019092919080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291908035906020019092919050505061199c565b005b348015610ae757600080fd5b50610b1460048036036020811015610afe57600080fd5b8101908080359060200190929190505050611adf565b6040518082815260200191505060405180910390f35b610b5660048036036020811015610b4057600080fd5b8101908080359060200190929190505050611afe565b005b348015610b6457600080fd5b50610b9160048036036020811015610b7b57600080fd5b8101908080359060200190929190505050611dc6565b005b610c36600480360360c0811015610ba957600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803560ff16906020019092919080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611f16565b005b6000600283836040516020018083838082843780830192505050925050506040516020818303038152906040526040518082805190602001908083835b60208310610c985780518252602082019150602081019050602083039250610c75565b6001836020036101000a038019825116818451168082178552505050505050905001915050602060405180830381855afa158015610cda573d6000803e3d6000fd5b5050506040513d6020811015610cef57600080fd5b810190808051906020019092919050505090506000806000868152602001908152602001600020905081816004015414610d91576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260168152602001807f686173684f757470757420213d20686173684c6f636b0000000000000000000081525060200191505060405180910390fd5b4281600501541115610e0b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260198152602001807f54696d6520746f20636c61696d2068617320657870697265640000000000000081525060200191505060405180910390fd5b60018160090160146101000a81548160ff021916908315150217905550610e918160010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1682600201548360010160149054906101000a900460ff168460030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16611fc7565b7fcd0ff142d27595d8208274a64e389d74eb488aa36d530aa78745a504d8c52074856040518082815260200191505060405180910390a15050505050565b6000806000838152602001908152602001600020600501549050919050565b6000806000838152602001908152602001600020600401549050919050565b6000806000838152602001908152602001600020905042816005015411610f9c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260188152602001807f54696d656c6f636b20686173206e6f742065787069726564000000000000000081525060200191505060405180910390fd5b60018160090160146101000a81548160ff0219169083151502179055506110228160000160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1682600201548360010160149054906101000a900460ff168460030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16611fc7565b7f3f0ae3dbca6968d01f3788766879c7e00880f9c4d9aee25334a71298c7ca38c3826040518082815260200191505060405180910390a15050565b6000806000838152602001908152602001600020600801549050919050565b600080600083815260200190815260200160002060030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b600080600083815260200190815260200160002060010160149054906101000a900460ff169050919050565b42841161115c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601e8152602001807f74696d656c6f636b206d75737420626520696e2074686520667574757265000081525060200191505060405180910390fd5b61117560038081111561116b57fe5b8a8a8a8a8a61236a565b8360008060015481526020019081526020016000206005018190555082600080600154815260200190815260200160002060070160006101000a81548160ff021916908360ff1602179055508160008060015481526020019081526020016000206008018190555080600080600154815260200190815260200160002060090160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600160008154809291906001019190505550611251898887896125ea565b7f77ba36680353b67de687f3126aa1e9a1f54220f398271da1a460aa038e43f6af60018054036000600381111561128457fe5b604051808381526020018260ff1660ff1681526020019250505060405180910390a1505050505050505050565b6000806000838152602001908152602001600020600201549050919050565b600080600083815260200190815260200160002060090160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b600080600083815260200190815260200160002060090160149054906101000a900460ff169050919050565b600080600083815260200190815260200160002060000160009054906101000a900460ff169050919050565b6000600283836040516020018083838082843780830192505050925050506040516020818303038152906040526040518082805190602001908083835b602083106113c757805182526020820191506020810190506020830392506113a4565b6001836020036101000a038019825116818451168082178552505050505050905001915050602060405180830381855afa158015611409573d6000803e3d6000fd5b5050506040513d602081101561141e57600080fd5b8101908080519060200190929190505050905060008060008681526020019081526020016000209050818160040154146114c0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260168152602001807f686173684f757470757420213d20686173684c6f636b0000000000000000000081525060200191505060405180910390fd5b60018160090160146101000a81548160ff0219169083151502179055506115468160010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1682600201548360010160149054906101000a900460ff168460030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16611fc7565b7fcd0ff142d27595d8208274a64e389d74eb488aa36d530aa78745a504d8c52074856040518082815260200191505060405180910390a15050505050565b600080600083815260200190815260200160002060000160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b60008060008381526020019081526020016000206004015460001c9050919050565b600080600083815260200190815260200160002060070160009054906101000a900460ff169050919050565b60008060008381526020019081526020016000209050428160050154116116a0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260188152602001807f74696d656c6f636b206e6f74207965742065787069726564000000000000000081525060200191505060405180910390fd5b60018160090160146101000a81548160ff0219169083151502179055506117268160010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1682600201548360010160149054906101000a900460ff168460030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16611fc7565b7fcd0ff142d27595d8208274a64e389d74eb488aa36d530aa78745a504d8c52074826040518082815260200191505060405180910390a15050565b4281116117d6576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601e8152602001807f74696d656c6f636b206d75737420626520696e2074686520667574757265000081525060200191505060405180910390fd5b6117f0600160038111156117e657fe5b878787878761236a565b8060008060015481526020019081526020016000206005018190555060016000815480929190600101919050555061182a868584866125ea565b7f77ba36680353b67de687f3126aa1e9a1f54220f398271da1a460aa038e43f6af60018054036000600381111561185d57fe5b604051808381526020018260ff1660ff1681526020019250505060405180910390a1505050505050565b6000600283836040516020018083838082843780830192505050925050506040516020818303038152906040526040518082805190602001908083835b602083106118e757805182526020820191506020810190506020830392506118c4565b6001836020036101000a038019825116818451168082178552505050505050905001915050602060405180830381855afa158015611929573d6000803e3d6000fd5b5050506040513d602081101561193e57600080fd5b8101908080519060200190929190505050905092915050565b600080600083815260200190815260200160002060010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b60015481565b428111611a11576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601e8152602001807f74696d656c6f636b206d75737420626520696e2074686520667574757265000081525060200191505060405180910390fd5b611a2b60026003811115611a2157fe5b888888888861236a565b8160008060015481526020019081526020016000206004018190555080600080600154815260200190815260200160002060050181905550600160008154809291906001019190505550611a81878685876125ea565b7f77ba36680353b67de687f3126aa1e9a1f54220f398271da1a460aa038e43f6af600180540360006003811115611ab457fe5b604051808381526020018260ff1660ff1681526020019250505060405180910390a150505050505050565b6000806000838152602001908152602001600020600601549050919050565b600080600083815260200190815260200160002090504281600501541115611b8e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260188152602001807f54696d6520746f2073776170206861732065787069726564000000000000000081525060200191505060405180910390fd5b611bf78160010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff168260070160009054906101000a900460ff168360090160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1684600801546125ea565b60006001811115611c0457fe5b60ff168160070160009054906101000a900460ff1660ff161415611c9c5780600801543414611c9b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260148152602001807f496e636f72726563742057656920616d6f756e7400000000000000000000000081525060200191505060405180910390fd5b5b60018160090160146101000a81548160ff021916908315150217905550611d228160010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1682600201548360010160149054906101000a900460ff168460030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16611fc7565b611d8b8160000160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1682600801548360070160009054906101000a900460ff168460090160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16611fc7565b7fcd0ff142d27595d8208274a64e389d74eb488aa36d530aa78745a504d8c52074826040518082815260200191505060405180910390a15050565b6000806000838152602001908152602001600020905042816005015411611e55576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260188152602001807f54696d656c6f636b20686173206e6f742065787069726564000000000000000081525060200191505060405180910390fd5b60018160090160146101000a81548160ff021916908315150217905550611edb8160000160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1682600201548360010160149054906101000a900460ff168460030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16611fc7565b7f3f0ae3dbca6968d01f3788766879c7e00880f9c4d9aee25334a71298c7ca38c3826040518082815260200191505060405180910390a15050565b611f3060006003811115611f2657fe5b878787878761236a565b80600080600154815260200190815260200160002060040181905550600160008154809291906001019190505550611f6a868584866125ea565b7f77ba36680353b67de687f3126aa1e9a1f54220f398271da1a460aa038e43f6af600180540360006003811115611f9d57fe5b604051808381526020018260ff1660ff1681526020019250505060405180910390a1505050505050565b600180811115611fd357fe5b60ff168260ff16141561230157600081905060008173ffffffffffffffffffffffffffffffffffffffff166370a08231876040518263ffffffff1660e01b8152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060206040518083038186803b15801561206457600080fd5b505afa158015612078573d6000803e3d6000fd5b505050506040513d602081101561208e57600080fd5b8101908080519060200190929190505050905060008273ffffffffffffffffffffffffffffffffffffffff1663a9059cbb88886040518363ffffffff1660e01b8152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b15801561212a57600080fd5b505af115801561213e573d6000803e3d6000fd5b505050506040513d602081101561215457600080fd5b8101908080519060200190929190505050905060008373ffffffffffffffffffffffffffffffffffffffff166370a08231896040518263ffffffff1660e01b8152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060206040518083038186803b1580156121e657600080fd5b505afa1580156121fa573d6000803e3d6000fd5b505050506040513d602081101561221057600080fd5b81019080805190602001909291905050509050600115158215151461229d576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260198152602001807f457363726f772066696e616c69736174696f6e206572726f720000000000000081525060200191505060405180910390fd5b8683018114156122f8576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526023815260200180612aba6023913960400191505060405180910390fd5b50505050612364565b6000600181111561230e57fe5b60ff168260ff161415612363578373ffffffffffffffffffffffffffffffffffffffff166108fc849081150290604051600060405180830381858888f19350505050158015612361573d6000803e3d6000fd5b505b5b50505050565b600080600060015481526020019081526020016000209050600180600181111561239057fe5b0160ff168460ff1611156123ef576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526023815260200180612b006023913960400191505060405180910390fd5b6001808111156123fb57fe5b60ff168460ff1614156124ac57600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1614156124ab576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601e8152602001807f455243323020636f6e74726163742061646472657373206d697373696e67000081525060200191505060405180910390fd5b5b868160000160006101000a81548160ff021916908360ff160217905550858160000160016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550848160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550838160010160146101000a81548160ff021916908360ff1602179055506000600181111561257957fe5b60ff168460ff161415612594573481600201819055506125e1565b828160020181905550818160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b50505050505050565b6001808111156125f657fe5b60ff168360ff16141561277c57600082905060008173ffffffffffffffffffffffffffffffffffffffff1663dd62ed3e87306040518363ffffffff1660e01b8152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019250505060206040518083038186803b1580156126bb57600080fd5b505afa1580156126cf573d6000803e3d6000fd5b505050506040513d60208110156126e557600080fd5b810190808051906020019092919050505090508281101561276e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260208152602001807f4e6f7420656e6f75676820455243323020746f6b656e7320617070726f76656481525060200191505060405180910390fd5b612779868585612782565b50505b50505050565b600082905060008173ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b8152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060206040518083038186803b15801561280657600080fd5b505afa15801561281a573d6000803e3d6000fd5b505050506040513d602081101561283057600080fd5b8101908080519060200190929190505050905060008273ffffffffffffffffffffffffffffffffffffffff166323b872dd8730876040518463ffffffff1660e01b8152600401808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019350505050602060405180830381600087803b15801561290057600080fd5b505af1158015612914573d6000803e3d6000fd5b505050506040513d602081101561292a57600080fd5b81019080805190602001909291905050509050600115158115151461299a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526026815260200180612b236026913960400191505060405180910390fd5b60008373ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b8152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060206040518083038186803b158015612a1957600080fd5b505afa158015612a2d573d6000803e3d6000fd5b505050506040513d6020811015612a4357600080fd5b810190808051906020019092919050505090508483018114612ab0576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526023815260200180612add6023913960400191505060405180910390fd5b5050505050505056fe46696e616c69736174696f6e20646964206e6f74207570646174652062616c616e636545524332302062616c616e6365206e6f74207570646174656420636f72726563746c7974686973546f6b656e5374616e64617264206973206f7574206f6620626f756e64732e4661696c75726520696e204552433230207472616e7366657246726f6d2066756e6374696f6ea265627a7a723158204d6c48e4ed1ff5d3656993a3e37cd406e0dda4b8e449ad28e964860cea43f79064736f6c63430005110032";


; (async () => {
  try {
    console.log("name is: " + DltNameOptions.ETHEREUM);
    // Initialise overledger with ethereum for this example
    const overledger = new OverledgerSDK(mappId, bpiKey, {
      dlts: [{ dlt: DltNameOptions.ETHEREUM }],
      provider: { network: 'testnet' },
    });

    // SET the signing key;
    overledger.dlts.ethereum.setAccount(partyAEthereumPrivateKey);

    // Get the address sequence.
    const ethereumSequenceRequest = await overledger.dlts.ethereum.getSequence(partyAEthereumAddress);
    const ethereumAccountSequence = ethereumSequenceRequest.data.dltData[0].sequence;

    console.log('ethereumAccountSequence:' + ethereumAccountSequence);

    // Sign the transaction.
    // As input to this function, we will be providing a TransactionEthereumRequest object (of @quantnetwork/overledger-dlt-ethereum) that inherits from the TransactionAccountRequest object which inherits from the TransactionRequest object (both of @quantnetwork/overledger-types)
    const signedTransactions = await overledger.sign([
      {
            // The following parameters are from the TransactionRequest object:
        dlt: DltNameOptions.ETHEREUM,
        type: TransactionTypeOptions.ACCOUNTS,
        subType: { name: TransactionEthereumSubTypeOptions.SMART_CONTRACT_DEPLOY },
        message: "",  // This must be empty for a contractDeploy transaction
            // The following parameters are from the TransactionAccountRequest object:
        fromAddress: partyAEthereumAddress,
        toAddress: "", // This must be empty for a contractDeploy transaction
        sequence: ethereumAccountSequence, // must be an integer >= 0
        amount: '0', // Must be an integer >= 0
        smartContract: {
          code: smartContractDemoCode, // Put the bytecode to deploy here
          functionCall: [{
            functionType: SCFunctionTypeOptions.CONSTRUCTOR_WITH_NO_PARAMETERS,
            functionName: "", // Not needed for constructor
            inputParams: []
          }

          ],
          extraFields: {
              // The following parameters are from the SmartContractEthereum object:
            payable: false
          }
        },
        extraFields: {
              // The following parameters are from the TransactionEthereumRequest object:
            compLimit: '4000000', // Price for each individual gas unit this transaction will consume
            compUnitPrice: '8000000000' // The maximum fee that this transaction will use
        }
      },
    ]);

    console.log('signedTransaction:');
    console.log(JSON.stringify(signedTransactions, null, 2));

    // Send the transactions to Overledger.
    const result = (await overledger.send(signedTransactions)).data;

    // Log the result.
    console.log('OVL result:');
    console.log(JSON.stringify(result, null, 2));
    console.log("");
    console.log('Your smart contract creation transaction hash is: ' + result.dltData[0].transactionHash);
    console.log("");
  } catch (e) {
    console.error('error:', e);
  }
})();

